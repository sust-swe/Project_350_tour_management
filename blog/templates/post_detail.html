{% extends 'base.html' %}
{% load staticfiles %}
{% block content_1 %}


<div class="container">
    <div class="row">
        <div class=" justify-content-center col-md-12 card mb-4  mt-3 left  top">
            <div class="card-body">
                <!-- {{post_detail}} -->
                <h1>{% block title %} {{ post.title }} {% endblock title %}</h1>
                <p class=" text-muted">{{ post.user_detail.user }} | {{ post.created_on }}</p>
                <p class="card-text ">{{ post.content | safe | linebreaksbr}}</p>
                {% if user.is_authenticated %}
                <a class='btn btn-primary' href="{% url 'post_edit' pk=post.pk %}">
                    <span class="glyphicon glyphicon-pencil">Edit</span>
                </a>
                <a class='btn btn-primary' style="background-color: rgb(238, 10, 10);"
                    href="{% url 'post_remove' pk=post.pk %}">
                    <span class="glyphicon glyphicon-remove">Remove</span>
                </a> <br>
                {% endif %}
                <br>
                <a href="#" class="btn btn-primary" onClick="document.getElementById('likebutton').submit()">Like</a>
                {{post.likes}} <a href="#" class="btn btn-primary"
                    onClick="document.getElementById('dislikebutton').submit()">Dislike</a>
                {{post.dislikes}}


                <form id="likebutton" method="POST" action="/blog/bloglist/{{post.id}}/preference/1/">
                    {% csrf_token %}
                    <input type="hidden">
                </form>

                <form id="dislikebutton" method="POST" action="/blog/bloglist/{{post.id}}/preference/2/">
                    {% csrf_token %}
                    <input type="hidden">
                </form>
                <h1>Comments: </h1>
                <a class="btn btn-primary" href="{% url 'addcomment' pk=post.pk %}">Add Comment</a>

                </form>


            </div>
            {% for comment in post.comments.all %}
            <br>
            {% if user.is_authenticated or comment.approve_comment %}
            {{ comment.text | safe }}
            {{comment.user_detail.user}} |
            {{comment.created_on}}
            <!-- <a class="btn btn-primary" href="{% url 'comment_remove' pk=comment.pk %}">Remove Comment</a> -->

            {% if not comment.approve_comment %}
            <a class="btn btn-primary" href="{% url 'comment_approve' pk=comment.pk %}">Approve Comment</a>
            <br>
            <a class="btn btn-primary" href="{% url 'comment_remove' pk=comment.pk %}">Remove Comment</a>
            {% endif %}
            <br>



            {% endif %}
            {% empty %}
            <p>No Comments!</p>
            {% endfor %}

        </div>
    </div>
</div>

{% endblock content_1 %}