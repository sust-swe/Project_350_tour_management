{% extends 'base.html' %}
{% load staticfiles %}
{% block content_1 %}


<div class="container">
    <div class="row">
        <div class=" justify-content-center col-md-12 card mb-4  mt-3 left  top">
            <div class="card-body">
                <!-- {{post_detail}} -->
                <h1>{% block title %} {{ post.title }} {% endblock title %}</h1>
                <p class=" text-muted">{{ post.user_detail.user }} | {{ post.created_on }}</p>
                <p class="card-text ">{{ post.content | safe}}</p>
                <a href="#" onClick="document.getElementById('likebutton').submit()">Like This Post</a>
                {{post.likes}} | <a href="#" onClick="document.getElementById('dislikebutton').submit()">Dislike
                    This Post</a> {{post.dislikes}}


                <form id="likebutton" method="POST" action="/blog/bloglist/{{post.id}}/preference/1/">
                    {% csrf_token %}
                    <input type="hidden">
                </form>

                <form id="dislikebutton" method="POST" action="/blog/bloglist/{{post.id}}/preference/2/">
                    {% csrf_token %}
                    <input type="hidden">
                </form>
                <a href="{% url 'addcomment' pk=post.pk %}">Add Comment</a>


            </div>
            {% for comment in post.comments.all %}
            <br>
            {% if user.is_authenticated or comment.approve_comment %}
            {{comment.created_on}}

            {% if not comment.approve_comment %}
            <a href="{% url 'comment_approve' pk=comment.pk %}">Approve Comment</a>
            <a href="{% url 'comment_remove' pk=comment.pk %}">Remove Comment</a>
            {% endif %}

            {{ comment.text | safe }}
            <p>By: {{comment.user_detail.user}}</p>
            {% endif %}
            {% empty %}
            <p>No Comments!</p>
            {% endfor %}

        </div>
    </div>
</div>

{% endblock content_1 %}